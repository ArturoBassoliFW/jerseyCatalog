{% extends "base.html" %}
{% block title %}{{ titolo_pagina }}{% endblock %}

{% block content %}
    <div class="stats-header">
        <h1>ğŸ“ˆ {{ titolo_pagina }}</h1>
        <p>Un'analisi completa della tua collezione</p>
    </div>

    
    <div class="stats-container">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">âš½</div>
                <div class="stat-label">Maglie Totali</div>
                <h3 class="stat-value">{{ statistiche.totale_maglie }}</h3>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">ğŸŒ</div>
                <div class="stat-label">Pubbliche</div>
                <h4 class="stat-value success">{{ statistiche.maglie_pubbliche }}</h4>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">ğŸ”’</div>
                <div class="stat-label">Private</div>
                <h4 class="stat-value danger">{{ statistiche.maglie_private }}</h4>
            </div>
        </div>
        
        {% if statistiche.totale_maglie %}
            <div class="section-card">
                <div class="section-title">
                    <span style="font-size: 1.75rem;">ğŸ“…</span>
                    <h2>Storia della Collezione</h2>
                </div>
                <ul class="timeline-list">
                    {% if statistiche.prima_maglia %}
                        <li class="timeline-item">
                            <strong>Prima Maglia</strong>
                            {{ statistiche.prima_maglia.squadra }} - {{ statistiche.prima_maglia.giocatore }} ({{ statistiche.prima_maglia.anno_stagione }})
                            <br>
                            <small>
                                ğŸ“… {{ statistiche.prima_maglia.data_creazione|date:"d F Y" }}
                            </small>
                        </li>
                    {% endif %}
                    
                    {% if statistiche.ultima_maglia %}
                        <li class="timeline-item">
                            <strong>Ultima Maglia</strong>
                            {{ statistiche.ultima_maglia.squadra }} - {{ statistiche.ultima_maglia.giocatore }} ({{ statistiche.ultima_maglia.anno_stagione }})
                            <br>
                            <small>
                                ğŸ“… {{ statistiche.ultima_maglia.data_creazione|date:"d F Y" }}
                            </small>
                        </li>
                    {% endif %}
                </ul>
            </div>
            
            <div class="section-card">
                <div class="section-title">
                    <span style="font-size: 1.75rem;">ğŸ†</span>
                    <h2>Top 5 Squadre</h2>
                </div>
                <ol class="ranking-list">
                    {% for item in squadre_popolari %}
                        <li class="ranking-item">
                            <div class="ranking-number"></div>
                            <div class="ranking-content">
                                <strong>{{ item.squadra }}</strong>
                            </div>
                            <div class="ranking-count">{{ item.conteggio }}</div>
                        </li>
                    {% endfor %}
                </ol>
            </div>
            
            <div class="section-card">
                <div class="section-title">
                    <span style="font-size: 1.75rem;">ğŸ“Š</span>
                    <h2>Per Stagione</h2>
                </div>
                <div class="season-grid">
                    {% for item in anni_stagione %}
                        <div class="season-badge">
                            <span class="season-year">{{ item.anno_stagione }}</span>
                            <span class="season-count">{{ item.conteggio }} maglie</span>
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% else %}
            <div class="empty-state">
                <div class="empty-state-icon">ğŸ“¦</div>
                <h3>Nessuna Statistica Disponibile</h3>
                <p>Aggiungi la tua prima maglia per vedere le statistiche!</p>
                <a href="{% url 'aggiungi_maglia' %}" role="button" class="contrast">
                    Aggiungi Maglia
                </a>
            </div>
        {% endif %}
        
    </div>
{% endblock %}