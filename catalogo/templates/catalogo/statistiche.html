{% extends "base.html" %}

{% block title %}{{ titolo_pagina }}{% endblock %}

{% block content %}
    <header style="text-align: center; margin-bottom: 40px;">
        <h1>ðŸ“ˆ {{ titolo_pagina }}</h1>
        <p>Un'analisi rapida della tua collezione di maglie.</p>
    </header>
    
    <article style="max-width: 900px; margin: 0 auto;">
        
        <h2>Riepilogo Generale</h2>
        
        <div class="grid">
            <section style="text-align: center;">
                <p style="margin-bottom: 0;"><strong>Maglie Totali</strong></p>
                <h3 class="contrast" style="margin-top: 0;">{{ statistiche.totale_maglie }}</h3>
            </section>
            <section style="text-align: center;">
                <p style="margin-bottom: 0;"><strong>In Vetrina (Pubbliche)</strong></p>
                <h4 style="margin-top: 0; color: var(--pico-color-success);">{{ statistiche.maglie_pubbliche }}</h4>
            </section>
            <section style="text-align: center;">
                <p style="margin-bottom: 0;"><strong>Private</strong></p>
                <h4 style="margin-top: 0; color: var(--pico-color-danger);">{{ statistiche.maglie_private }}</h4>
            </section>
        </div>
        
        {% if statistiche.totale_maglie %}
            
            <hr>
            
            <details>
                <summary role="button">Storia della Collezione</summary>
                <ul>
                    <li>
                        <strong>Prima Maglia Aggiunta:</strong> 
                        {% if statistiche.prima_maglia %}
                            {{ statistiche.prima_maglia.squadra }} ({{ statistiche.prima_maglia.anno_stagione }}) - 
                            <small>Aggiunta il: {{ statistiche.prima_maglia.data_creazione|date:"d M Y" }}</small>
                        {% else %}
                            Nessuna.
                        {% endif %}
                    </li>
                    <li>
                        <strong>Ultima Maglia Aggiunta:</strong>
                        {% if statistiche.ultima_maglia %}
                            {{ statistiche.ultima_maglia.squadra }} ({{ statistiche.ultima_maglia.anno_stagione }}) -
                            <small>Aggiunta il: {{ statistiche.ultima_maglia.data_creazione|date:"d M Y" }}</small>
                        {% else %}
                            Nessuna.
                        {% endif %}
                    </li>
                </ul>
            </details>
            
            <hr>

            <section>
                <h2>Top 5 Squadre</h2>
                <ol>
                    {% for item in squadre_popolari %}
                        <li>
                            <strong>{{ item.squadra }}:</strong> <mark class="secondary">{{ item.conteggio }}</mark> maglie
                        </li>
                    {% endfor %}
                </ol>
            </section>

            <hr>

            <section>
                <h2>Ripartizione per Stagione</h2>
                <div class="grid">
                    {% for item in anni_stagione %}
                        <div style="text-align: center; padding: 5px;">
                            <mark class="secondary">{{ item.anno_stagione }}</mark> ({{ item.conteggio }})
                        </div>
                    {% endfor %}
                </div>
            </section>

        {% else %}
            <p style="text-align: center; color: var(--pico-color-danger);">Aggiungi la tua prima maglia per vedere le statistiche!</p>
        {% endif %}
        
    </article>

    <footer style="text-align: center; margin-top: 30px;">
        <a href="{% url 'dashboard' %}" role="button" class="secondary outline">Torna alla Dashboard</a>
    </footer>

{% endblock %}